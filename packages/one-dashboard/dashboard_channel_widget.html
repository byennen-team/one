<template name="channelWidget">
  {{#each unreadRooms}}
  <div class="channel-widget {{channelType}}">

    <div class="header">
      <div class="view-chat">view chat</div>
      <p class='channel-type'>{{channelTypeLong}}</p>
      <p class='channel-name'>{{channelName}} <span class="notice">{{unread}}</span></p>
    </div>

<!-- TODO: All of the conversation history (old messages too) should be rendered in .conversation -->
    <div class="conversation">
      {{#each messages}}
        {{#if isFirstUnread ../_id}}
          {{> newBar}}
        {{/if}}
        {{#if isSimpleMessage}}
          {{>message}}
        {{/if}}
        {{#if isPostMessage}}
          {{>postMessage}}
        {{/if}}
        <!-- TODO: add more message types as requested -->
        {{#if isDocumentMessage}}
          {{> documentMessage}}
        {{/if}}
      {{/each}}
      </div>
    </div>
    {{/each}}
</template>

<!-- TODO: Delete everything after this comment. Just here for styling.
      Delete handlebar tag in dashboard.html too. -->
<template name="channelWidgetStyle">

  <div class="channel-widget message">
    <div class="header">
      <div class="view-chat">view chat</div>
      <p class='channel-type'>direct messaging</p>
      <p class='channel-name'>Dottie Herman <span class="notice">1</span></p>
    </div>
    <div class="conversation">

      <div class="message">
        <div class="avatar">
          <div class="status mobile"></div>
          <img src="images/com-hub-main/joy.jpg" alt="Joy Avery" />
        </div>

        <div class="message-body">
          <p class="name">
            Joy Avery
            <span class="time">7:30am</span>
          </p>
          <p class="text">Updated Listing Agreement now in the Company Docs. Happy New Year everyone!</p>
          <div class="doc">
            <div class="thumbnail">
              <img src="/images/com-hub-main/doc.jpg" alt="Leasing Agreement.pdf" class="doc-thumb">
            </div>
            <p class="title">
              <span class="fa fa-file"></span>
              Leasing Agreement.pdf
              <span class="size">125kb</span>
            </p>
            <div class="action-bar">
              <a href="#" class="download">
                <i class="fa fa-arrow-circle-down"></i>
                download
              </a>
              <a href="#" class="print">
                <i class="fa fa-print"></i>
                print
              </a>
              <a href="#" class="view">
                <i class="fa fa-view"></i>
                view
              </a>
            </div>
          </div>
        </div>
      </div>
      <div class="clearfix"></div>
      <div class="message user">
        <div class="avatar">
          <div class="status active"></div>
          <img src="/images/com-hub-main/jon.jpg" alt="Agent's name here" />
        </div>
        <div class="message-body">
          <p class="name">
            Jon Evans
            <span class="time">8:48am</span>
          </p>
          <p class="text">Thanks <a href='#'>@JoyAvery</a>!</p>
        </div>
      </div>
      <div class="clearfix"></div>
      <div class="new-message-bar">
        <p>New messages</p>
        <hr/>
      </div>
      <div class="clearfix"></div>
      <div class="message">
        <div class="avatar">
          <div class="status inactive"></div>
          <img src="/images/com-hub-main/dottie.jpg" alt="Agent's name here" />
        </div>
        <div class="message-body">
          <p class="name">
            Dottie Herman
            <span class="time">8:52am</span>
          </p>
          <p class="subject">News Update</p>
          <p class="text">DouglasElliman Real Estate and KnightFrank Residential, two of the biggest names in real estate <a href='#'>...<span class="blue-text">read <i class="fa fa-arrow-circle-right"></i></span></a></p>
        </div>
      </div>
      <div class="clearfix"></div>
    </div>
  </div>

  <div class="channel-widget rooms">
    <div class="header">
      <div class="view-chat">view chat</div>
      <p class='channel-type'>rooms</p>
      <p class='channel-name'>Team Awesome <span class="notice">23</span></p>
    </div>
    <div class="conversation">

      <div class="message">
        <div class="avatar">
          <div class="status mobile"></div>
          <img src="images/com-hub-main/joy.jpg" alt="Joy Avery" />
        </div>

        <div class="message-body">
          <p class="name">
            Joy Avery
            <span class="time">7:30am</span>
          </p>
          <p class="text">Updated Listing Agreement now in the Company Docs. Happy New Year everyone!</p>
          <div class="doc">
            <div class="thumbnail">
              <img src="/images/com-hub-main/doc.jpg" alt="Leasing Agreement.pdf" class="doc-thumb">
            </div>
            <p class="title">
              <span class="fa fa-file"></span>
              Leasing Agreement.pdf
              <span class="size">125kb</span>
            </p>
            <div class="action-bar">
              <a href="#" class="download">
                <i class="fa fa-arrow-circle-down"></i>
                download
              </a>
              <a href="#" class="print">
                <i class="fa fa-print"></i>
                print
              </a>
              <a href="#" class="view">
                <i class="fa fa-view"></i>
                view
              </a>
            </div>
          </div>
        </div>
      </div>
      <div class="clearfix"></div>
      <div class="message user">
        <div class="avatar">
          <div class="status active"></div>
          <img src="/images/com-hub-main/jon.jpg" alt="Agent's name here" />
        </div>
        <div class="message-body">
          <p class="name">
            Jon Evans
            <span class="time">8:48am</span>
          </p>
          <p class="text">Thanks <a href='#'>@JoyAvery</a>!</p>
        </div>
      </div>
      <div class="clearfix"></div>
      <div class="new-message-bar">
        <p>New messages</p>
        <hr/>
      </div>
      <div class="clearfix"></div>
      <div class="message">
        <div class="avatar">
          <div class="status inactive"></div>
          <img src="/images/com-hub-main/dottie.jpg" alt="Agent's name here" />
        </div>
        <div class="message-body">
          <p class="name">
            Dottie Herman
            <span class="time">8:52am</span>
          </p>
          <p class="subject">News Update</p>
          <p class="text">DouglasElliman Real Estate and KnightFrank Residential, two of the biggest names in real estate <a href='#'>...<span class="blue-text">read <i class="fa fa-arrow-circle-right"></i></span></a></p>
        </div>
      </div>
      <div class="clearfix"></div>
    </div>
  </div>

  <div class="channel-widget personal">
    <div class="header">
      <div class="view-chat">view chat</div>
      <p class='channel-type'>personal   </p>
      <p class='channel-name'>John Evans <span class="notice">1</span></p>
    </div>
    <div class="conversation">

      <div class="message">
        <div class="avatar">
          <div class="status mobile"></div>
          <img src="images/com-hub-main/joy.jpg" alt="Joy Avery" />
        </div>

        <div class="message-body">
          <p class="name">
            Joy Avery
            <span class="time">7:30am</span>
          </p>
          <p class="text">Updated Listing Agreement now in the Company Docs. Happy New Year everyone!</p>
          <div class="doc">
            <div class="thumbnail">
              <img src="/images/com-hub-main/doc.jpg" alt="Leasing Agreement.pdf" class="doc-thumb">
            </div>
            <p class="title">
              <span class="fa fa-file"></span>
              Leasing Agreement.pdf
              <span class="size">125kb</span>
            </p>
            <div class="action-bar">
              <a href="#" class="download">
                <i class="fa fa-arrow-circle-down"></i>
                download
              </a>
              <a href="#" class="print">
                <i class="fa fa-print"></i>
                print
              </a>
              <a href="#" class="view">
                <i class="fa fa-view"></i>
                view
              </a>
            </div>
          </div>
        </div>
      </div>
      <div class="clearfix"></div>
      <div class="message user">
        <div class="avatar">
          <div class="status active"></div>
          <img src="/images/com-hub-main/jon.jpg" alt="Agent's name here" />
        </div>
        <div class="message-body">
          <p class="name">
            Jon Evans
            <span class="time">8:48am</span>
          </p>
          <p class="text">Thanks <a href='#'>@JoyAvery</a>!</p>
        </div>
      </div>
      <div class="clearfix"></div>
      <div class="new-message-bar">
        <p>New messages</p>
        <hr/>
      </div>
      <div class="clearfix"></div>
      <div class="message">
        <div class="avatar">
          <div class="status inactive"></div>
          <img src="/images/com-hub-main/dottie.jpg" alt="Agent's name here" />
        </div>
        <div class="message-body">
          <p class="name">
            Dottie Herman
            <span class="time">8:52am</span>
          </p>
          <p class="subject">News Update</p>
          <p class="text">DouglasElliman Real Estate and KnightFrank Residential, two of the biggest names in real estate <a href='#'>...<span class="blue-text">read <i class="fa fa-arrow-circle-right"></i></span></a></p>
        </div>
      </div>
      <div class="clearfix"></div>
    </div>
  </div>

</template>